---
title: CLI Reference
description: Command-line tools for managing Claude agents
---

The `gh claude` CLI extension provides commands for creating, validating, compiling, and managing Claude-powered GitHub Actions workflows. This reference covers all available commands and their usage.

## Available Commands

| Command | Description | Use When |
|---------|-------------|----------|
| [init](init/) | Initialize gh-claude in your repository | Starting a new project |
| [compile](compile/) | Compile agent markdown to workflow YAML | Deploying or updating agents |
| [validate](validate/) | Validate agent definitions without compiling | Checking configuration before deployment |
| [list](list/) | List all agents in repository | Viewing what agents exist |
| [setup-token](setup-token/) | Configure Claude API authentication | Setting up API access |
| [setup-app](setup-app/) | Configure GitHub App for branded identity | Enabling advanced features |

## Typical Workflows

### First-Time Setup

When starting with gh-claude in a new repository:

```bash
# 1. Initialize repository structure
gh claude init

# 2. Configure authentication
gh claude setup-token

# 3. Validate example agents
gh claude validate --all

# 4. Compile to workflows
gh claude compile --all

# 5. Deploy
git add .github/
git commit -m "Add Claude agents"
git push
```

### Creating a New Agent

When adding a new agent to an existing setup:

```bash
# 1. Create agent file
# Edit .github/claude-agents/my-agent.md

# 2. Validate configuration
gh claude validate my-agent.md

# 3. Compile to workflow
gh claude compile my-agent.md

# 4. Deploy
git add .github/workflows/claude-my-agent.yml
git commit -m "Add my-agent workflow"
git push
```

### Updating an Existing Agent

When modifying an agent's configuration or instructions:

```bash
# 1. Edit agent file
# Modify .github/claude-agents/my-agent.md

# 2. Validate changes
gh claude validate my-agent.md

# 3. Recompile workflow
gh claude compile my-agent.md

# 4. Deploy updated workflow
git add .github/workflows/claude-my-agent.yml
git commit -m "Update my-agent configuration"
git push
```

### Validating All Agents

Before deploying changes to multiple agents:

```bash
# Validate all agent definitions
gh claude validate --all

# If successful, compile all
gh claude compile --all

# Deploy
git add .github/workflows/
git commit -m "Update all agents"
git push
```

## Quick Examples

### Initialize and Set Up

```bash
# Initialize with default structure
gh claude init

# Set up API key authentication
gh claude setup-token --api-key

# Set up OAuth authentication
gh claude setup-token --oauth
```

### Validate and Compile

```bash
# Validate single agent
gh claude validate issue-triage.md

# Validate all agents
gh claude validate --all

# Compile single agent
gh claude compile issue-triage.md

# Compile all agents
gh claude compile --all

# Dry run (show output without writing)
gh claude compile --dry-run my-agent.md
```

### List and Inspect

```bash
# List all agents in repository
gh claude list

# List with full paths
gh claude list --verbose
```

### GitHub App Setup

```bash
# Configure for single repository
gh claude setup-app

# Configure for organization
gh claude setup-app --org my-org

# Interactive setup with guidance
gh claude setup-app
```

## Command Options Reference

### Global Options

Available for all commands:

- `--help` - Show help for command
- `--version` - Show gh-claude version

### Common Patterns

#### Working with Specific Agents

Most commands accept agent file paths:

```bash
# Relative to current directory
gh claude validate .github/claude-agents/my-agent.md

# Just the filename (searches in .github/claude-agents/)
gh claude validate my-agent.md

# Absolute path
gh claude validate /path/to/agent.md
```

#### Batch Operations

Use `--all` flag for operations on all agents:

```bash
gh claude validate --all
gh claude compile --all
```

#### Preview Changes

Use `--dry-run` to see what would happen:

```bash
# Show workflow YAML without writing file
gh claude compile --dry-run my-agent.md

# Useful for debugging or reviewing changes
gh claude compile --dry-run --all
```

## Output Locations

### Generated Files

- **Agent definitions**: `.github/claude-agents/*.md` (created by you)
- **Workflow files**: `.github/workflows/claude-*.yml` (generated by compile)
- **Example agents**: `.github/claude-agents/examples/` (created by init)

### Configuration Files

- **Repository secrets**: Set via `gh secret set` (not files)
- **GitHub App credentials**: Stored as GitHub secrets (not files)

## Command Return Codes

All commands use standard exit codes:

- `0` - Success
- `1` - Error (validation failed, file not found, etc.)

Use in scripts:

```bash
# Validate before compiling
if gh claude validate --all; then
  gh claude compile --all
  echo "✅ All agents compiled successfully"
else
  echo "❌ Validation failed"
  exit 1
fi
```

## Environment Variables

Some commands respect environment variables:

- `ANTHROPIC_API_KEY` - Claude API key (for local testing)
- `CLAUDE_CODE_OAUTH_TOKEN` - OAuth token (for local testing)
- `GH_TOKEN` - GitHub token (for gh CLI operations)

**Note:** These are primarily for GitHub Actions. Local CLI operations use `gh` authentication.

## Getting Help

### Command-Specific Help

```bash
# General help
gh claude --help

# Command-specific help
gh claude init --help
gh claude compile --help
gh claude validate --help
```

### Verbose Output

For debugging, many commands support verbose output:

```bash
gh claude compile --dry-run my-agent.md
```

## Next Steps

**New users:**
- Start with [init](init/) to set up your repository
- Configure authentication with [setup-token](setup-token/)
- Learn about [Agent Definition](../guide/agent-definition/) format

**Deploying agents:**
- Use [validate](validate/) to check configurations
- Use [compile](compile/) to generate workflows
- See [Quick Start](../getting-started/quick-start/) for full walkthrough

**Advanced setup:**
- Configure [GitHub App](setup-app/) for branded identity
- Review [CLI tool documentation](init/) for detailed options
- Check [Troubleshooting](../guide/troubleshooting/) for common issues
